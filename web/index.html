<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Procesamiento de imágenes sobre cultivos de Brassica Carinata</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/scrolling-nav.css" rel="stylesheet">

</head>

<body id="page-top">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">Tratamiento de Imágenes por Computadora</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#about">Introducción</a>
          </li>
          <li class="nav-item">

            <a class="nav-link js-scroll-trigger" href="#datos">Datos disponibles</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#metodologia">Metodología</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#resultados">Resultados</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#futuro">Trabajo futuro</a>

          </li>

        </ul>
      </div>
    </div>
  </nav>

  <header class="text-white">
    <div class="container text-center">
      <h1>Procesamiento de imágenes sobre cultivos de Brassica Carinata</h1>

      <p class="lead">Facultad de Ingeniería - UDELAR</p>

    </div>
  </header>

  <section id="about">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">

          <h2>Introducción</h2>
          <p class="lead">
            Brassica Carinata es una especie oleaginosa invernal, del género Brassicaceae con origen en las tierras
            altas de Etiopía. Dentro de sus usos comunes se encuentran la alimentación animal a partir de sus hojas y la
            producción de condimentos o aceites utilizando sus semillas.
          </p>
          <p class="lead">
            En Uruguay, su incorporación al sistema productivo es reciente, pero dado un escaso desarrollo a nivel
            mundial del cultivo, nuestro país se posiciona como pionero a nivel productivo y científico del mismo.
            Aproximadamente se cuentan con 30 mil hectáreas de cultivo, siendo UPM uno de los agentes impulsores del
            mismo debido a su producción de biocombustibles.
          </p>
          <p class="lead">
            El área de Producción Vegetal de la Estación Experimental Mario A. Cassinoni (EEMAC) en Paysandú, realizó una investigación que buscaba 
            obtener información sobre la optimización y estimación de los cultivos. Para ello, realizaron plantaciones en parcelas con dos 
            configuraciones, variando la distancia de los surcos en los que se cultivan las plantas. En conjunto con el departamento de Ingeniería 
            Biológica, trabajaron utilizando imágenes de las parcelas germinadas, para así obtener la correspondencia de las plantas en cada estadio, 
            detectando la posición de las mismas de forma manual.

          </p>
          <p class="lead">
            El presente proyecto busca hacer uso de las técnicas de procesamiento de imágenes con el objetivo de automatizar la detección de plantas en 
            aquellos estadios donde pueden ser identificadas de forma individual.

          </p>
          

        </div>
      </div>
    </div>
  </section>

  <section id="datos" class="bg-dark">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto text-light">
          <h2>Datos disponibles</h2>
          <p class='lead'>
            Con el fin de investigar la optimización y estimación de diferentes configuraciones de plantación, se
            generan 24 parcelas de prueba. Doce de las mismas corresponden a cultivos distanciados con surcos de 34 cm,
            y las doce restantes se encuentran a 17cm.
          </p>
          <p class="lead">
            Para realizar el seguimiento de cada planta, se toman imágenes de las parcelas en diferentes estadios para
            luego medir la cantidad de germinaciones y su ubicación exacta.
          </p>
          <p class="lead">
            Los datos disponibles corresponden a 10 registros fotográficos temporales en diferentes etapas del cultivo.
            Estos son capturados siguiendo un protocolo de adquisición que incluye la distancia focal, la resolución
            de la imágen (6000 x 4000 píxeles), altura, encuadre, orientación, horario de captura, entre otras.
          </p>
          
          <p class="lead">
            Dentro de los registros, tres de los mismos
            disponen de información adicional que incluye el etiquetado manual de las plantas encontradas.
          </p>
        </div>
      </div>
    </div>
  </section>

  <section id="metodologia">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2>Metodología</h2>
          <p class="lead ">Debido a que la base de datos de imágenes presenta variabilidad considerable en la iluminación,
            se acotó a un grupo reducido de las mismas con el objetivo de realizar una prueba de concepto del
            desarrollo.</p>
            <p class="lead">
              Las siguientes imágenes corresponden a dos de los estadios etiquetados y son las utilizadas para comprobar el funcionamiento del algoritmo implementado. 
            </p>
          <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="images/I1.JPG" alt="First slide">
                <div class="carousel-caption d-none d-md-block">
                  <!-- <h5>Ejemplo 1</h5> -->
                  <p>Imagen 1</p>
                </div>
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I2.JPG" alt="Second slide">
                <div class="carousel-caption d-none d-md-block">
                  <!-- <h5>Ejemplo 2</h5> -->
                  <p>Imagen 2</p>
                </div>
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I3.JPG" alt="Third slide">
                <div class="carousel-caption d-none d-md-block">
                  <!-- <h5>Ejemplo 3</h5> -->
                  <p>Imagen 3</p>
                </div>
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I4.JPG" alt="Third slide">
                <div class="carousel-caption d-none d-md-block">
                  <!-- <h5>Imagen de ejemplo</h5> -->
                  <p>Imagen 4</p>
                </div>
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>


          <p class="lead">
            Cada imagen cuenta con un archivo XML con los datos de etiquetado
            de plantas realizados manualmente por un experto, como se aprecia a continuación.
          </p>




          <div id="carouselExampleControls2" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="images/DSC_0076xml.jpg" alt="First slide">

              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/DSC_0347xml.jpg" alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/DSC_0103xml.jpg" alt="Third slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/DSC_0083xml.jpg" alt="Third slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls2" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls2" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>







          <p class='lead'>En primer lugar se realiza una segmentación por colores, seleccionando el color verde, mediante el espacio de color HSV para obtener una mejor aproximación del rango del mismo.
            Se consideran dos casos: el caso óptimo de color y un caso con margenes extendidos buscando tener en cuenta valores hacia los tonos amarillos, abarcando así algunos casos particulares.
            A través del uso de morfología matemática y operaciones lógicas se obtiene una primera segmentación de información.
          </p>

          
          <p class="lead">
            Debido a que las imágenes utilizadas son de etapas tempranas del cultivo, dadas las caracteristicas propias del mismo, es posible detectar hojas
            individuales de una misma planta como áreas diferenciadas. Buscando resolver este problema se aplica sobre una dilatación, un etiquetado con conectividad 8, obteniendo luego los bounding box correspondientes a cada etiqueta.
          </p>
        </div>
      </div>
    </div>
  </section>


  <section id="resultados" class="bg-dark text-light">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-light">Resultados</h2>
          <p class="lead">Sobre las imágenes seleccionadas se ejecuta el algoritmo desarrollado, obteniendo como resultado la detección de múltiples plantas. En particular, se logra detectar e individualizar las plantas que se encuentran a una distancia considerable de sus vecinas; aquellas que dado su crecimiento se superponen, son detectadas de forma agrupada no siendo posible distinguirlas entre sí por medio de este método.
          </p>


          <div id="carouselExampleControls3" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="images/I1_boundingbox.jpg" alt="First slide">

              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I2_boundingbox.jpg" alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I3_boundingbox.jpg" alt="Third slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I4_boundingbox.jpg" alt="Third slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls3" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls3" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>





          <p class="lead">Para evaluar el funcionamiento del sistema se plantea el cálculo de la sensibilidad y especificidad del mismo. Debido a esto, es necesario plantear previamente algunas hipótesis para la evaluación de estas medidas. En primer lugar se asumen como verdaderas absolutas las detecciones realizadas por el experto, significando contrastar los resultados obtenidos con los bounding box generados por el mismo. Luego, dado que el algoritmo desarrollado funciona sobre toda la imagen y no exclusivamente sobre la parcela, es necesario acotar las mediciones y comparaciones al espacio de interés.  
            </p>




          <div id="carouselExampleControls4" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="images/I1_res1.png" alt="First slide">
                  
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I2_res1.png" alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I3_res1.png" alt="Third slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I4_res1.png" alt="Third slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls4" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls4" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>



          <p class="lead">


          </p>




          <div id="carouselExampleControls5" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="images/I1_res2.png" alt="First slide">
                  
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I2_res2.png" alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I3_res2.png" alt="Third slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="images/I4_res2.png" alt="Third slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls5" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls5" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>




          <p class="lead">La matriz de confusión se realiza a partir de imágenes binarizadas a las cuales se le pueden aplicar operaciones lógicas. Esto da como resultado la acumulación de píxeles diferentes de cero para las categorías Verdadero Positivo, Falso Positivo, Verdadero Negativo y Falso Negativo.</p>

          <img src="images/tabla.png" class="img-fluid rounded" alt="Responsive image">

          <p class="lead">En la tabla se observa que la sensibilidad supera el 50%  y la especificidad el 70% en todos los casos considerados, esto da una idea general del funcionamiento del algoritmo. En particular, los valores de especificidad permiten afirmar un buen rendimiento en la detección de zonas verdes.  Por otra parte, la sensibilidad obtenida manifiesta un alto porcentaje de detección respecto a las etiquetadas por el experto.</p>
        </div>
      </div>
    </div>
  </section>


  <section id="futuro">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2>Trabajo futuro</h2>

          <p class="lead">Como trabajo a futuro se espera mejorar el comportamiento del algoritmo ante imágenes con iluminación intensa así como a sombras pronunciadas sobre la parcela. La invarianza a la intensidad permitiría abarcar un mayor grupo de imágenes posibles de procesar en las cuales la detección fuera efectiva. </p>

          <p class="lead">Si bien las evaluaciones planteadas arrojan un una idea global de comportamiento  ante la detección de cultivo, se entiende necesario realizar mejoras que permitan estudiar el comportamiento de manera individual ante cada planta detectada. Un posible procedimiento en respuesta a ello, es obtener el área superpuesta entre los bounding box detectados y los establecidos por el experto, de esta forma se obtendría una medición sobre la precisión de cada bounding box a la detección de una o más plantas dentro del mismo.</p>

            <p class = "lead">Por mas información sobre el proyecto y los codigos implmentados, visitar el repositorio en <a href="https://github.com/Santiago-Peraza/proyectoTimag">Github</a>. </p>
        </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-5 bg-dark">
    <div class="container">

      <p class="m-0 text-center text-white"> Santiago Peraza - Vanessa Yelós </p>
      <p class="m-0 text-center text-white">2020</p>

    </div>
    <!-- /.container -->
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom JavaScript for this theme -->
  <script src="js/scrolling-nav.js"></script>

</body>

</html>